<div class="dashboard-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        <span class="title-icon">📊</span>
        Dashboard
      </h1>
      <p class="page-subtitle">
        Overview of your document management system
      </p>
    </div>
    <div class="header-actions">
      <button class="quick-action" (click)="quickUpload()">
        <span>📤</span>
        Quick Upload
      </button>
      <button class="quick-action" (click)="quickGenerate()">
        <span>📝</span>
        Quick Generate
      </button>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon letters">📝</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.totalLetters.toLocaleString() }}</div>
        <div class="stat-label">Total Letters</div>
        @if (stats.lettersGrowth > 0) {
          <div class="stat-trend positive">
            <span>↗</span>
            {{ stats.lettersGrowth }}%
          </div>
        }
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon emails">📧</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.sentEmails.toLocaleString() }}</div>
        <div class="stat-label">Emails Sent</div>
        @if (stats.emailsGrowth > 0) {
          <div class="stat-trend positive">
            <span>↗</span>
            {{ stats.emailsGrowth }}%
          </div>
        }
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon pending">⏳</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.pendingLetters.toLocaleString() }}</div>
        <div class="stat-label">Pending Letters</div>
        @if (stats.pendingGrowth < 0) {
          <div class="stat-trend positive">
            <span>↘</span>
            {{ getAbsoluteValue(stats.pendingGrowth) }}%
          </div>
        }
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon employees">👥</div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.totalEmployees.toLocaleString() }}</div>
        <div class="stat-label">Total Employees</div>
        @if (stats.employeesGrowth > 0) {
          <div class="stat-trend positive">
            <span>↗</span>
            {{ stats.employeesGrowth }}%
          </div>
        }
      </div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="recent-activity">
    <div class="section-header">
      <h3>Recent Activity</h3>
      <button class="view-all-btn">View All</button>
    </div>
    
    <div class="activity-list">
      @for (activity of recentActivity; track activity.id) {
        <div class="activity-item">
          <div class="activity-icon">{{ getActivityIcon(activity.type) }}</div>
          <div class="activity-content">
            <div class="activity-title">{{ activity.title }}</div>
            <div class="activity-description">{{ activity.description }}</div>
            <div class="activity-time">{{ activity.time | date:'short' }}</div>
          </div>
          <div class="activity-status" [class]="activity.status">
            {{ activity.status }}
          </div>
        </div>
      }
    </div>
  </div>

  <!-- Letter Types -->
  <div class="letter-types">
    <div class="section-header">
      <h3>Letter Types</h3>
      <button class="view-all-btn">View All</button>
    </div>
    
    <div class="letter-types-grid">
      @for (letterType of letterTypes; track letterType.name) {
        <div class="letter-type">
          <div class="letter-icon" [style.color]="letterType.color">
            {{ letterType.icon }}
          </div>
          <div class="letter-content">
            <div class="letter-name">{{ letterType.displayName }}</div>
            <div class="letter-count">{{ letterType.count }} generated</div>
          </div>
          <button class="letter-btn" (click)="generateLetter(letterType.name)">
            Generate
          </button>
        </div>
      }
    </div>
  </div>

  <!-- System Status -->
  <div class="system-status">
    <div class="section-header">
      <h3>System Status</h3>
      <button class="refresh-btn">
        <span>🔄</span>
        Refresh
      </button>
    </div>
    
    <div class="status-grid">
      <div class="status-item">
        <div class="status-header">
          <div class="status-title">Database</div>
          <div class="status-icon">{{ getStatusIcon(systemStatus.database.status) }}</div>
        </div>
        <div class="status-details">{{ systemStatus.database.details }}</div>
      </div>

      <div class="status-item">
        <div class="status-header">
          <div class="status-title">Email Service</div>
          <div class="status-icon">{{ getStatusIcon(systemStatus.email.status) }}</div>
        </div>
        <div class="status-details">{{ systemStatus.email.details }}</div>
      </div>

      <div class="status-item">
        <div class="status-header">
          <div class="status-title">Digital Signature</div>
          <div class="status-icon">{{ getStatusIcon(systemStatus.signature.status) }}</div>
        </div>
        <div class="status-details">{{ systemStatus.signature.details }}</div>
      </div>

      <div class="status-item">
        <div class="status-header">
          <div class="status-title">File Storage</div>
          <div class="status-icon">{{ getStatusIcon(systemStatus.storage.status) }}</div>
        </div>
        <div class="status-details">{{ systemStatus.storage.details }}</div>
      </div>
    </div>
  </div>

  <!-- Chart Section -->
  <div class="chart-section">
    <div class="section-header">
      <h3>Letters Generated Trend</h3>
      <select class="chart-period" [(ngModel)]="selectedPeriod" (change)="updateChart()">
        <option value="7">Last 7 days</option>
        <option value="30" selected>Last 30 days</option>
        <option value="90">Last 90 days</option>
      </select>
    </div>
    
    <div class="chart-container">
      <canvas #letterChart></canvas>
    </div>
  </div>
</div>
